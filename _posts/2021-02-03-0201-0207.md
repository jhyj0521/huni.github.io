---
title: "0201-0207"
tag: TIL
category: TIL
---
## 0201
# Promise


* promise란 자바스크립트에서 제공하는 비동기를 간편하게 처리할 수 있도록 도와주는 오브젝트
* 정해진 장시간의 기능을 수행하고 나서, 성공적으로 수행하면 성공 메시지와 함께 결과 값을, 에러를 발견했다면 에러를 반환
* 중점으로 봐야할 것은 비동기처리가 성공했는지 실패했는지의 상태와 프로미스를 만드는 Producer vs 프로미스를 사용하는 Consumer

## Producer
*새로운 프로미스가 만들어 질때는, executor라는 함수가 자동적으로 실행된다.*  
-> 프로미스를 만들면서 바로 실행되기 때문에 상황에 맞게 프로미스를 사용해야 한다.

```javascript
const promise = new Promise((resolve, reject) => {
    // 네트워크나 파일 읽기등 무거운 일을 한다.
    console.log('doing something');
    setTimeout(() => {
        //resolve('ellie');
        reject(new Error('no network')) // reject는 보통 Error 오브젝트를 통해서 값을 전달
    }, 2000);
})
```
* 비동기 처리 성공 시 resolve, 실패 시 reject에 값을 전달한다.

## Consumer
```javascript
promise.then((value) => {   //then은 promise가 성공적으로 마치고나면 resolve의 인자값을 value로 전달한다.
    console.log(value); 
}).catch(error => {     //then의 return값이 Promise이기 때문에 다시 catch를 이어서 호출할 수 있다. => chaning
    console.log(error);
}).finally(() => {
    console.log('finally');  //성공이던 실패이던 호출한다.
})
```

## 0202
# Async
* 프로미스 사용의 깔끔한 스타일
* syntactic sugar - 기존에 존재하는 것을 감싸서 우리가 조금 더 간편하게 쓸 수 있는 api를 제공하는 것

## async
* 코드 블럭이 자동으로 프로미스로 바뀐다.
```javascript
async function fetchUser() {  
    // do network request in 10 secs...
    return 'ellie'
}
```

## await
* async가 붙은 함수 안에서만 사용 가능
```javascript
async function getApple() {
	await delay(3000);
	return '🍌';
}
```
-> 동기적으로 처리되는 것처럼 보이게 한다.