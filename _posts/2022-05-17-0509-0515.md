---
title: "0509 - 0515"
tag: TIL
category: TIL
excerpt: ""
---

## 0512

# Vanilla JavaScript로 웹 컴포넌트 만들기

최근에는 바닐라 자바스크립트만을 사용하여 기업들의 과제 전형을 두 차례 진행했다.  
그 중 한 기업에서는 기존에 사용하던 방식대로 controller, store, render로 파일을 구분하여 기능을 구현하였는데, 이번 기회에는 새로운 도전 방식으로 구현해보고자 도전하게 되었다.  
방식은 프로그래머스 사전 과제의 고양이 사진첩 만들기와 황준일 개발자님의 블로그를 참고하였다.

## Entry Point

시작점은 index.js에서부터 시작한다.

```javascript
import App from "./components/App";

new App(document.querySelector("#app"));
```

엔트리 포인트에서는 상위 부모 컨테이너 역할을 할 App 컴포넌트를 불러와서 생성하고, 인자로 id가 app인 DOM을 넘긴다.

## 컴포넌트 추상화

새로운 패턴의 JS 개발을 보며 리액트와 코드가 상당히 닮아있다는 생각을 했다.  
이전과는 다르게 클래스 문법을 사용해서 컴포넌트를 구현하였고, 공통되는 코드 로직을 Component 클래스로 분리하고, 이를 위임받아 사용하도록 작성했다.

```javascript
export default class Component {
  constructor($target, props) {
    this.$target = $target;
    this.props = props;

    this.setUp();
    this.setEvent();
    this.render();
  }

  setUp() {}

  template() {
    return "";
  }

  render() {
    this.$target.innerHTML = this.template();

    this.mounted();
  }

  mounted() {}

  setEvent() {}

  setState(newState) {
    this.state = { ...this.state, ...newState };

    this.render();
  }
}
```

- 모든 컴포넌트는 해당 컴포넌트를 렌더링 할 상위 컴포넌트와 상위 컴포넌트로부터 전달받을 props를 파라미터로 받는다.
- constructor에서는 전달받은 파라미터를 인스턴스의 값으로 저장하고, setUp, setEvent, render 메서드를 호출한다.
- setUp에서는 상태 초기화를 담당한다.
- render에서는 파라미터로 전달받은 target에 template에 정의한 값을 innerHTML로 할당하고, mounted 메서드를 호출한다. mounted에서는 하위의 컴포넌트를 불러와서 생성하는 코드를 작성한다.
- setEvent에서는 이벤트 위임을 활용하여 이벤트 핸들러를 구현한다.
- setState로 상태가 변경되면 다시 리렌더링이 발생하는 구조이다.
